/*!  | http://thinkpixellab.com/PxLoader */
!function(a,b){"function"==typeof define&&define.amd?define([],function(){return a.PxLoader=b()}):"object"==typeof module&&module.exports?module.exports=b():a.PxLoader=b()}(this,function(){function a(a){a=a||{},this.settings=a,null==a.statusInterval&&(a.statusInterval=5e3),null==a.loggingDelay&&(a.loggingDelay=2e4),null==a.noProgressTimeout&&(a.noProgressTimeout=1/0);var c,d=[],e=[],f=[],g=Date.now(),h={QUEUED:0,WAITING:1,LOADED:2,ERROR:3,TIMEOUT:4},i=function(a){return null==a?[]:Array.isArray(a)?a:[a]};this.add=function(a){a.tags=new b(a.tags),null==a.priority&&(a.priority=1/0),d.push({resource:a,status:h.QUEUED})},this.addProgressListener=function(a,c){f.push({callback:a,tags:new b(c)})},this.addCompletionListener=function(a,c){e.push({tags:new b(c),callback:function(b){b.completedCount===b.totalCount&&a(b)}})};var j=function(a){a=i(a);var b=function(b){for(var c=b.resource,d=1/0,e=0;e<c.tags.length;e++)for(var f=0;f<Math.min(a.length,d)&&!(c.tags.all[e]===a[f]&&d>f&&(d=f,0===d))&&0!==d;f++);return d};return function(a,c){var d=b(a),e=b(c);return e>d?-1:d>e?1:a.priority<c.priority?-1:a.priority>c.priority?1:0}};this.start=function(a){c=Date.now();var b=j(a);d.sort(b);for(var e=0,f=d.length;f>e;e++){var g=d[e];g.status=h.WAITING,g.resource.start(this)}setTimeout(k,100)};var k=function(){for(var b=!1,c=Date.now()-g,e=c>=a.noProgressTimeout,f=c>=a.loggingDelay,i=0,j=d.length;j>i;i++){var l=d[i];l.status===h.WAITING&&(l.resource.checkStatus&&l.resource.checkStatus(),l.status===h.WAITING&&(e?l.resource.onTimeout():b=!0))}f&&b&&n(),b&&setTimeout(k,a.statusInterval)};this.isBusy=function(){for(var a=0,b=d.length;b>a;a++)if(d[a].status===h.QUEUED||d[a].status===h.WAITING)return!0;return!1};var l=function(a,b){var c,i,j,k,l,n=null;for(c=0,i=d.length;i>c;c++)if(d[c].resource===a){n=d[c];break}if(null!=n&&n.status===h.WAITING)for(n.status=b,g=Date.now(),j=f.concat(e),c=0,i=j.length;i>c;c++)k=j[c],l=0===k.tags.length?!0:a.tags.intersects(k.tags),l&&m(n,k)};this.onLoad=function(a){l(a,h.LOADED)},this.onError=function(a){l(a,h.ERROR)},this.onTimeout=function(a){l(a,h.TIMEOUT)};var m=function(a,b){var c,e,f,g,i=0,j=0;for(c=0,e=d.length;e>c;c++)f=d[c],g=!1,g=0===b.tags.length?!0:f.resource.tags.intersects(b.tags),g&&(j++,f.status!==h.LOADED&&f.status!==h.ERROR&&f.status!==h.TIMEOUT||i++);b.callback({resource:a.resource,loaded:a.status===h.LOADED,error:a.status===h.ERROR,timeout:a.status===h.TIMEOUT,completedCount:i,totalCount:j})},n=this.log=function(a){if(window.console){var b=Math.round((Date.now()-c)/1e3);window.console.log("PxLoader elapsed: "+b+" sec");for(var e=0,f=d.length;f>e;e++){var g=d[e];if(a||g.status===h.WAITING){var i="PxLoader: #"+e+" "+g.resource.getName();switch(g.status){case h.QUEUED:i+=" (Not Started)";break;case h.WAITING:i+=" (Waiting)";break;case h.LOADED:i+=" (Loaded)";break;case h.ERROR:i+=" (Error)";break;case h.TIMEOUT:i+=" (Timeout)"}g.resource.tags.length>0&&(i+=" Tags: ["+g.resource.tags.all.join(",")+"]"),window.console.log(i)}}}}}function b(a){if(this.all=[],this.first=null,this.length=0,this.lookup={},a){if(Array.isArray(a))this.all=a.slice(0);else if("object"==typeof a)for(var b in a)a.hasOwnProperty(b)&&this.all.push(b);else this.all.push(a);this.length=this.all.length,this.length>0&&(this.first=this.all[0]);for(var c=0;c<this.length;c++)this.lookup[this.all[c]]=!0}}return b.prototype.intersects=function(a){if(0===this.length||0===a.length)return!1;if(1===this.length&&1===a.length)return this.first===a.first;if(a.length<this.length)return a.intersects(this);for(var b in this.lookup)if(a.lookup[b])return!0;return!1},a}),function(a,b){"function"==typeof define&&define.amd?define(["pxloader"],function(c){return a.PxLoaderImage=b(c)}):"object"==typeof module&&module.exports?module.exports=b(require("pxloader")):a.PxLoaderImage=b(a.PxLoader)}(this,function(a){function b(a,b,c,d){var e=this,f=null;this.img=new Image,void 0!==d&&(this.img.crossOrigin=d),this.tags=b,this.priority=c;var g=function(){"complete"===e.img.readyState&&(j(),f.onLoad(e))},h=function(){j(),f.onLoad(e)},i=function(){j(),f.onError(e)},j=function(){e.unbind("load",h),e.unbind("readystatechange",g),e.unbind("error",i)};this.start=function(b){f=b,e.bind("load",h),e.bind("readystatechange",g),e.bind("error",i),e.img.src=a},this.checkStatus=function(){e.img.complete&&(j(),f.onLoad(e))},this.onTimeout=function(){j(),e.img.complete?f.onLoad(e):f.onTimeout(e)},this.getName=function(){return a},this.bind=function(a,b){e.img.addEventListener(a,b,!1)},this.unbind=function(a,b){e.img.removeEventListener(a,b,!1)}}return a.prototype.addImage=function(a,c,d,e){var f=new b(a,c,d,e);return this.add(f),f.img},b}),function(a,b){"function"==typeof define&&define.amd?define(["pxloader"],function(c){return a.PxLoaderSound=b(c)}):"object"==typeof module&&module.exports?module.exports=b(require("pxloader")):a.PxLoaderSound=b(a.PxLoader)}(this,function(a){function b(a,b,c,d){var e=this,f=null,g=navigator.userAgent.match(/(ipad|iphone|ipod)/i),h=navigator.userAgent.match(/android/i);this.useGlobalHTML5Audio=g||h,this.tags=c,this.priority=d,this.sound=soundManager.createSound({id:a,url:b,autoLoad:!1,onload:function(){f.onLoad(e)},onsuspend:function(){f.onTimeout(e)},whileloading:function(){var a=this.bytesLoaded,b=this.bytesTotal;a>0&&a===b&&f.onLoad(e)}}),this.start=function(a){f=a,this.useGlobalHTML5Audio?f.onTimeout(e):this.sound.load()},this.checkStatus=function(){switch(e.sound.readyState){case 0:break;case 1:break;case 2:f.onError(e);break;case 3:f.onLoad(e)}},this.onTimeout=function(){f.onTimeout(e)},this.getName=function(){return b}}return a.prototype.addSound=function(a,c,d,e){var f=new b(a,c,d,e);return this.add(f),f.sound},b}),function(a,b){"function"==typeof define&&define.amd?define(["pxloader"],function(c){return a.PxLoaderVideo=b(c)}):"object"==typeof module&&module.exports?module.exports=b(require("pxloader")):a.PxLoaderVideo=b(a.PxLoader)}(this,function(a){function b(a,b,c,d){var e=this,f=null;this.readyEventName="canplaythrough",this.video=document.createElement("video"),void 0!==d&&(this.video.crossOrigin=d),this.tags=b,this.priority=c;var g=function(){4===e.video.readyState&&(j(),f.onLoad(e))},h=function(){j(),f.onLoad(e)},i=function(){j(),f.onError(e)},j=function(){e.unbind("load",h),e.unbind(e.readyEventName,g),e.unbind("error",i)};this.start=function(b){f=b,e.bind("load",h),e.bind(e.readyEventName,g),e.bind("error",i),e.bind("suspend",h),e.video.src=a,e.video.load()},this.checkStatus=function(){4===e.video.readyState&&(j(),f.onLoad(e))},this.onTimeout=function(){j(),4!==e.video.readyState?f.onLoad(e):f.onTimeout(e)},this.getName=function(){return a},this.bind=function(a,b){e.video.addEventListener(a,b,!1)},this.unbind=function(a,b){e.video.removeEventListener(a,b,!1)}}return a.prototype.addVideo=function(a,c,d,e){var f=new b(a,c,d,e);return this.add(f),f.video},b}),function(a,b){"function"==typeof define&&define.amd?define(["pxloader"],function(c){return a.PxLoaderData=b(c)}):"object"==typeof module&&module.exports?module.exports=b(require("pxloader")):a.PxLoaderData=b(a.PxLoader)}(this,function(a){var b=function(a,b,c){var d=this,e=null;this.tags=b,this.priority=c,this.request=new XMLHttpRequest,this.start=function(b){e=b,d.request.onload=this.onLoad,d.request.onerror=this.onError,d.request.open("GET",a,!0),d.request.send(null)},this.checkStatus=function(){200===d.request.status&&e.onLoad(d)},this.onTimeout=function(){200===d.request.status?e.onLoad(d):e.onTimeout(d)},this.onLoad=function(){e.onLoad(d)},this.onError=function(){e.onError(d)},this.getName=function(){return a}};return a.prototype.addData=function(a,c,d){var e=new b(a,c,d);return this.add(e),e.request},b}),function(a,b){"function"==typeof define&&define.amd?define(["pxloader"],function(c){return a.PxLoaderAudio=b(c)}):"object"==typeof module&&module.exports?module.exports=b(require("pxloader")):a.PxLoaderAudio=b(a.PxLoader)}(this,function(a){function b(a,b,c,d){var e=this,f=null;this.readyEventName="canplaythrough",this.audio=document.createElement("audio"),void 0!==d&&(this.audio.crossOrigin=d),this.tags=b,this.priority=c;var g=function(){4===e.audio.readyState&&(j(),f.onLoad(e))},h=function(){j(),f.onLoad(e)},i=function(){j(),f.onError(e)},j=function(){e.unbind("load",h),e.unbind(e.readyEventName,g),e.unbind("error",i)};this.start=function(b){f=b,e.bind("load",h),e.bind(e.readyEventName,g),e.bind("error",i),e.bind("suspend",h),e.audio.src=a,e.audio.load()},this.checkStatus=function(){4===e.audio.readyState&&(j(),f.onLoad(e))},this.onTimeout=function(){j(),4!==e.audio.readyState?f.onLoad(e):f.onTimeout(e)},this.getName=function(){return a},this.bind=function(a,b){e.audio.addEventListener(a,b,!1)},this.unbind=function(a,b){e.audio.removeEventListener(a,b,!1)}}return a.prototype.addAudio=function(a,c,d,e){var f=new b(a,c,d,e);return this.add(f),f.audio},b});